#!/usr/bin/python3

from pwn import *

context.terminal = ['tmux', 'splitw', '-v']
context.arch = 'amd64'

if args['R']:
    r = remote('eof.h4ck3r.quest', 1337)
else:
    r = remote('127.0.0.1', 48763)
# gdb.attach(r)

r.sendlineafter('Press enter to start', '')

# q1
payload = r"print(getattr('Hello, {}!\n','format')(getattr('!\nHello, ','join')(getattr(getattr(open(0),'read')(),'split')())))"
r.sendlineafter('Input your code here: ', payload)

# q2
# print(getattr('\n', 'join')(list(map(str, list(map(round, list(map(getattr(0.4472135954999579, '__mul__'), list(map(getattr(1.618033988749895, '__pow__'), getattr(getattr(open(0),'read')(),'split')()))))))))))
payload = r"print(getattr('\n', 'join')(list(map(str, list(map(round, list(map(getattr(0.4472135954999579, '__mul__'), list(map(getattr(1.618033988749895, '__pow__'), list(map(int,getattr(getattr(open(0),'read')(),'split')()))))))))))))"
r.sendlineafter('Input your code here: ', payload)

payload = r"print(getattr('\n','join')(getattr(dict(getattr(list(getattr(dict(zip(range(1,10001),map(str,range(1,10001)))),'items')()),'__add__')(getattr(list(getattr(dict(zip(range(3,10001,3),getattr(getattr('Fizz','split')(),'__mul__')(9000))),'items')()),'__add__')(getattr(list(getattr(dict(zip(range(5,10001,5),getattr(getattr('Buzz','split')(),'__mul__')(3000))),'items')()),'__add__')(list(getattr(dict(zip(range(15,10001,15),getattr(getattr('FizzBuzz','split')(),'__mul__')(700))),'items')()))))),'values')()))"
r.sendlineafter('Input your code here: ', payload)
r.interactive()